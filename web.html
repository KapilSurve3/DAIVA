<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Responsive Layout</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://pyscript.net/releases/2024.1.1/core.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    
    <script defer src="jscript.js" type="text/javascript"></script>
    <script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>
    
    <script type="module" src="https://pyscript.net/releases/2024.1.1/core.js"></script>
    <script defer src ="https://pyscript.net/alpha/pyscript.js"></script>

    
    <py-env>
        - matplotlib
        - pandas
        - pyodide.http
       

        
    </py-env>
    <style>
        body{
          background-size: cover;
          background-color: rgb(10, 16, 67);
          background-image: url(images/scriptures.png);
          font-family: Arial, sans-serif;
          text-align: center;
          margin: 0;
          padding: 0px;
        }
        
        #qr-reader {
            display: block;
            align-self: left;
            position: relative;
            width: 100%;
            max-width: 400px;
            padding: 10px 20px;
        }
        #result {
            display: block;
            position: relative;
            margin-top: 10px; 
            left: 10%;
            
            font-size: 1.2em;
            color: #ffda83;
            max-width: 80%;
            contain: content;
        }
        .button {
            border-color: rgb(162, 92, 0);
            border-style: dashed;
            background-color: rgb(1, 1, 42);
            border-width: 5px;
            margin: 10px;
            padding: 10px 10px;
            font-size: 1em;
            cursor: pointer;
            max-width: 100px;
            color: rgb(170, 220, 254);
            text-align: left;
        }
        .button1 {
            position: relative;
            border-color: #a1ccff;
            border-style:double;
            border-radius: 100%;
            background-color: rgb(1, 1, 42);
            border-width: 5px;
            margin: 10px;
            padding: 10px 10px;
            font-size: 1em;
            cursor: pointer;
            max-width: 100px;
            color: rgb(170, 220, 254);
            text-align: left;
        }
        .button4{
            border-radius: 20%;
            border-color: #dcb85c;
            border-style:inset;
            background-color: rgb(1, 1, 42);
            border-width: 5px;
            margin: 5px;
            padding: 5px 5px;
            font-size: 1em;
            cursor: pointer;
            max-width: 100px;
            color: rgb(170, 220, 254);
            text-align: left;
            z-index: 1;
        }
        .button5{
            border-radius: 20%;
            border-color: #ffa85b;
            border-style:inset;
            background-color: rgb(1, 1, 42);
            border-width: 5px;
            margin: 0px;
            padding: 10px 10px;
            font-size: 1em;
            cursor: pointer;
            max-width: 100px;
            color: rgb(170, 220, 254);
            text-align: center;
        }
      </style>
       
</head>
<body>
    <img class="left-fixed" style="border: 0" src="https://i.ibb.co/68Znh4c/Kundalibackground1.png">
    <img class="right-fixed" style="border: 0" src="https://i.ibb.co/68Znh4c/Kundalibackground1.png">
    <img id="bottom-fixed" class="bottom-fixed" style="border: 0;"src="https://i.ibb.co/PmkGLCf/bottomline.png">
    <img id="top-fixed" class="top-fixed" style="border: 0;"src="https://i.ibb.co/PmkGLCf/bottomline.png">
    <img id ="pbuttonimg" src="https://i.ibb.co/MhrKf60/Uparrow.png" class="imbutton3">
    <button id="pbutton" class="button3" style="border: 0;" onclick="playAudio2()"></button>
    <audio id = "myAudio2" src="Suddenvibration.mp3"  ></audio>
    <div id ="commandpanel" class="Commandpanel">
        <div class="form-container" style="padding-top: 10%;">
            <div class="form-row">
                
                <button id="GetChart" class="button4" pys-onClick="QRFetch" >Get QR</button>
               
                <button id="updateChart" class="button4">./Help</button>

                <button id="up" class="button4" onclick="chatopen()" >Chat</button>
            </div>
            <div class="form-row">
                
                <input type="number" id="id2" name="id2" placeholder="Enter Id" style="border-color: rgb(3, 6, 34); width: 50%; background-color: rgb(103, 199, 251); color: rgb(15, 1, 32); display: block;margin-top: 10px; margin-left: 10px; padding: 5px;">
                <input type="text" id="gender" name="gender" placeholder="Enter Sex" style="border-color: rgb(3, 6, 34); width: 50%; background-color: rgb(103, 199, 251); color: rgb(15, 1, 32); display: block;margin-top: 10px; margin-left: 10px; padding: 5px;" >
              
            </div>
            <div class="form-row">
                
                <!--<input type="date" id="dob2" name="dob2">-->
                
            </div>
            <div class="form-row">
                <input type="text" id="chartcode" style="border-color: rgb(3, 6, 34); width: 50%; background-color: rgb(103, 199, 251); color: rgb(15, 1, 32); display: block;margin-top: 10px; margin-left: 10px; padding: 5px;"></input>
                <input type="button" style="width: 30%; margin-right: 10px;margin-top: 10px ;height: 30px; background-color: rgb(6, 6, 46); border-color: rgb(134, 195, 255); color: rgb(138, 212, 255); display: block;" pys-onClick="Chatter"  id="yehwala" value="Chat"></input>
                
            </div>
            <div class="form-row">
                
            </div>
           
          
        </div>
      
    </div>
    <a onclick="delayNavigation('#daiva-container2')">
        <img class="chakra2" src="https://i.ibb.co/RPCrj4P/Yantra.png" alt="Yantra">
        <audio id = "myAudio4" src="Chakrarotating.mp3"  ></audio>
        <audio id = "myAudio" src="fourbars.mp3"  ></audio>
    </a>
    <div id="slider" class="slider">
        <img src="/Images/Uparrow.png" id="video" width="75%" style="visibility: hidden;left:15%;top: 20% ;position:fixed; z-index: 1;" autoplay loop muted></img>
        <div style="color:gold ;" id="Chatscreen" class="slider2">
            <div class="chat-container">
                <div id="chat-screen" class="chat-screen">
                    <!-- Chat messages will appear here -->
                </div>
             
            </div>
        </div>
        
        
    </div>
    
    <section class="main-container" id="main-container"> 
      
        <div class="left-content" >
            <label id ="asc2" class="data">1</label>
                <label id = "Sunnum2"class="data">0</label>
                <label id = "Moonnum2"class="data">1</label>
                <label id = "Mercurynum2" class="data">0</label>
                <label id = "Venusnum2"class="data">1</label>
                <label id = "Marsnum2"class="data">0</label>
                <label id = "Saturnnum2"class="data">1</label>
                <label id = "Jupiternum2"class="data">0</label>
                <label id = "Rahunum2" class="data">0</label>
                <label id = "Ketunum2" class="data">1</label>
                <label id = "Sundeg2"class="data">1</label>
                <label id = "Moondeg2"class="data">0</label>
                <label id = "Mercurydeg2" class="data">1</label>
                <label id = "Venusdeg2"class="data">0</label>
                <label id = "Marsdeg2"class="data">1</label>
                <label id = "Saturndeg2"class="data">0</label>
                <label id = "Jupiterdeg2"class="data">1</label>
                <label id = "Rahudeg2" class="data">0</label>
                <label id = "Ketudeg2" class="data">1</label>

                <label id ="asc" class="data">1</label>
                <label id = "Sunnum"class="data">2</label>
                <label id = "Moonnum"class="data">3</label>
                <label id = "Mercurynum" class="data">4</label>
                <label id = "Venusnum"class="data">5</label>
                <label id = "Marsnum"class="data">6</label>
                <label id = "Saturnnum"class="data">7</label>
                <label id = "Jupiternum"class="data">8</label>
                <label id = "Rahunum" class="data">9</label>
                <label id = "Ketunum" class="data">10</label>
                <label id = "Sundeg"class="data">1</label>
                <label id = "Moondeg"class="data">0</label>
                <label id = "Mercurydeg" class="data">1</label>
                <label id = "Venusdeg"class="data">0</label>
                <label id = "Marsdeg"class="data">1</label>
                <label id = "Saturndeg"class="data">0</label>
                <label id = "Jupiterdeg"class="data">1</label>
                <label id = "Rahudeg" class="data">0</label>
                <label id = "Ketudeg" class="data">1</label>
            
        </div>
        <div class="mid-content">
            <div class="upper-div">
                
                <label class="titlemain"> D.A.I.V.A </label>
            
                
            </div>

            <div class="lower-div">
              
                <a onclick="delayNavigation('#daiva-container')">
                    <img class="chakra" src="https://i.ibb.co/HdxgJzQ/Swastikad.png"  onclick="changePositions()">
                    <audio id = "myAudio4" src="Chakrarotating.mp3"  ></audio>
                    <audio id = "myAudio" src="fourbars.mp3"  ></audio>
                </a>
               
            
            </div>
        </div>
        <div class="right-content">
            <!-- Right content goes here -->
             <input type="text" id="fileContent" ></input>
        </div>
    </section>
    
    <section class="daiva-container" id="daiva-container">
        <div class="left-content">
            <!-- Left content goes here -->
        </div>
        <div class="mid-content">
            
            <div class="upper-div">
               
                <label class="mainoutput" id="mainoutput" > Hello There , Future Instance Generator is under Developement, Stay tuned ! </label>  
                <div class="form-row" style="position: relative; margin-left: 18%;" >
                
                    <button id="marriage" class="button5" >Marriage</button>
                   
                    <button id="careeras" class="button5">Career</button>
                </div>
                <img class="adhyayan" src="https://i.ibb.co/n7K4wB6/border.png" alt="Adhyayan Image">
                
              
            </div>

            <div class="lower-div">
                <label class="Report" id="Report" ></label>
                
            </div>
        </div>
        <div class="right-content">
            <!-- Right content goes here -->
        </div>
    </section>
    <section class="daiva-container2" id="daiva-container2">
        <div class="left-content">
            <!-- Left content goes here -->
        </div>
        <div class="mid-content">
            
            <div class="upper-div">
                <div class="containerkundali">
                    <img src="https://i.ibb.co/cg4Pwtf/Chart.png" alt="Kundali" class="kundali">
                    
                    <!-- Planetary images -->
                    <img src="https://i.ibb.co/qjMmMrS/Sun.png" alt="Sun" id="sun" class="planet">
                    <img src="https://i.ibb.co/G94dVph/Moon.png" alt="Moon" id="moon" class="planet">
                    <img src="https://i.ibb.co/5sRd3bX/Mercury.png" alt="Mercury" id="mercury" class="planet">
                    <img src="https://i.ibb.co/vc4PBFV/Venus.png" alt="Venus" id="venus" class="planet">
                    <img src="https://i.ibb.co/H4PFSTF/Mars.png" alt="Mars" id="mars" class="planet">
                    <img src="https://i.ibb.co/rMtYjHs/Saturn.png" alt="Saturn" id="saturn" class="planet">
                    <img src="https://i.ibb.co/fSd1dKJ/Jupiter.png" alt="Jupiter" id="jupiter" class="planet">
                    <img src="https://i.ibb.co/425Gsnd/Rahu.png" alt="Rahu" id="rahu" class="planet">
                    <img src="https://i.ibb.co/pZK0XNM/Ketu.png" alt="Ketu" id="ketu" class="planet">
                    <!-- Add other planets similarly -->
            
                    <!-- Labels for planet houses (Example) -->
                   
                    <!-- Add more labels for other planets -->
            
                    
                </div>

            
                <label style="font-size: small; color: rgb(167, 209, 255); display: block; margin: 10px auto;">Enter your Ascendant</label>
                <input type="number" id="Asc" name="Asc" style="width: 90%; background-color: rgb(7, 7, 30); color: rgb(114, 182, 255); display: block; margin: 5px auto; padding: 5px;"></input>
               
            </div>

            <div class="lower-div">
                <form class="form" action="phpaction.php" method="post" style="padding: 10px; max-width: 100%; box-sizing: border-box;">
                    <label style="font-size: large; color: rgb(167, 252, 255); display: block; text-align: center; margin-bottom: 10px;">Enter the details</label>
                
                   
                
                   
                    <!-- Planets Section -->
                    <div style="display: flex; flex-wrap: wrap; justify-content: center;">
                        <div style="margin: 5px;">
                            <img src="https://i.ibb.co/qjMmMrS/Sun.png" style="height: 40px; width: 40px; display: block; margin: 0 auto;">
                            <input type="number" id="Sunplace" name="Sunplace" placeholder="house"  style="border: #82a4db;border-width: 1px;border-style:solid  ;width: 50px; background-color: rgb(7, 7, 30); color: rgb(114, 182, 255); display: block; margin: 5px auto;"></input>

                            <input type="number" step="0.01" id="Sunlab" name="Sunlab" placeholder="degrees" style="border: #82a4db;border-width: 1px;border-style:solid ;width: 50px; background-color: rgb(7, 7, 30); color: rgb(114, 182, 255); display: block; margin: 5px auto;"></input>
                        </div>
                
                        <div style="margin: 5px;">
                            <img src="https://i.ibb.co/G94dVph/Moon.png" style="height: 40px; width: 40px; display: block; margin: 0 auto;">
                            <input type="number" id="Moonplace" name="Moonplace"placeholder="house" style="border: #82a4db;border-width: 1px;border-style:solid  ;width: 50px; background-color: rgb(7, 7, 30); color: rgb(114, 182, 255); display: block; margin: 5px auto;"></input>
                            <input type="number" step="0.01" id="Moonlab" name="Moonlab"placeholder="degrees" style="border: #82a4db;border-width: 1px;border-style:solid  ;width: 50px; background-color: rgb(7, 7, 30); color: rgb(114, 182, 255); display: block; margin: 5px auto;"></input>
                        </div>
                
                        <!-- Continue for other planets similarly -->
                        <div style="margin: 5px;">
                            <img src="https://i.ibb.co/5sRd3bX/Mercury.png" style="height: 40px; width: 40px; display: block; margin: 0 auto;">
                            <input type="number" id="Mercuryplace" name="Mercuryplace"placeholder="house" style="border: #82a4db;border-width: 1px;border-style:solid  ;width: 50px; background-color: rgb(7, 7, 30); color: rgb(114, 182, 255); display: block; margin: 5px auto;"></input>
                            <input type="number" step="0.01" id="Mercurylab" name="Mercurylab"placeholder="degrees" style="border: #82a4db;border-width: 1px;border-style:solid  ;width: 50px; background-color: rgb(7, 7, 30); color: rgb(114, 182, 255); display: block; margin: 5px auto;"></input>
                        </div>

                         <!-- Venus -->
                        <div style="margin: 5px;">
                            <img src="https://i.ibb.co/vc4PBFV/Venus.png" style="height: 40px; width: 40px; display: block; margin: 0 auto;">
                            <input type="number" id="Venusplace" name="Venusplace"placeholder="house"  style="border: #82a4db;border-width: 1px;border-style:solid  ;width: 50px; background-color: rgb(7, 7, 30); color: rgb(114, 182, 255); display: block; margin: 5px auto;"></input>
                            <input type="number" step="0.01" id="Venuslab" name="Venuslab"placeholder="degrees" style="border: #82a4db;border-width: 1px;border-style:solid  ;width: 50px; background-color: rgb(7, 7, 30); color: rgb(114, 182, 255); display: block; margin: 5px auto;"></input>
                        </div>

                        <!-- Mars -->
                        <div style="margin: 5px;">
                            <img src="https://i.ibb.co/H4PFSTF/Mars.png" style="height: 40px; width: 40px; display: block; margin: 0 auto;">
                            <input type="number" id="Marsplace" name="Marsplace"placeholder="house"  style="border: #82a4db;border-width: 1px;border-style:solid  ;width: 50px; background-color: rgb(7, 7, 30); color: rgb(114, 182, 255); display: block; margin: 5px auto;"></input>
                            <input type="number" step="0.01" id="Marslab" name="Marslab"placeholder="degrees" style="border: #82a4db;border-width: 1px;border-style:solid  ;width: 50px; background-color: rgb(7, 7, 30); color: rgb(114, 182, 255); display: block; margin: 5px auto;"></input>
                        </div>

                        <!-- Jupiter -->
                        <div style="margin: 5px;">
                            <img src="https://i.ibb.co/fSd1dKJ/Jupiter.png" style="height: 40px; width: 40px; display: block; margin: 0 auto;">
                            <input type="number" id="Jupiterplace" name="Jupiterplace"placeholder="house"  style="border: #82a4db;border-width: 1px;border-style:solid  ;width: 50px; background-color: rgb(7, 7, 30); color: rgb(114, 182, 255); display: block; margin: 5px auto;"></input>
                            <input type="number" step="0.01" id="Jupiterlab" name="Jupiterlab"placeholder="degrees" style="border: #82a4db;border-width: 1px;border-style:solid  ;width: 50px; background-color: rgb(7, 7, 30); color:  rgb(114, 182, 255); display: block; margin: 5px auto;"></input>  
                        </div>

                        <div style="margin: 5px;">
                            <img src="https://i.ibb.co/rMtYjHs/Saturn.png" style="height: 40px; width: 40px; display: block; margin: 0 auto;">
                            <input type="number" id="Saturnplace" name="Saturnplace"placeholder="house"  style="border: #82a4db;border-width: 1px;border-style:solid  ;width: 50px; background-color: rgb(7, 7, 30); color: rgb(114, 182, 255); display: block; margin: 5px auto;"></input>
                            <input type="number" step="0.01" id="Saturnlab" name="Saturnlab"placeholder="degrees" style="border: #82a4db;border-width: 1px;border-style:solid  ;width: 50px; background-color: rgb(7, 7, 30); color: rgb(114, 182, 255); display: block; margin: 5px auto;"></input>
                        </div>

                        <div style="margin: 5px;">
                            <img src="https://i.ibb.co/425Gsnd/Rahu.png" style="height: 40px; width: 40px; display: block; margin: 0 auto;">
                            <input type="number" id="Rahupplace" name="Rahupplace" placeholder="house" style="border: #82a4db;border-width: 1px;border-style:solid  ;width: 50px; background-color: rgb(7, 7, 30); color: rgb(114, 182, 255); display: block; margin: 5px auto;"></input>
                            <input type="number" step="0.01" id="Rahulab" name="Rahulab" placeholder="degrees"style="border: #82a4db;border-width: 1px;border-style:solid  ;width: 50px; background-color: rgb(7, 7, 30); color: rgb(114, 182, 255); display: block; margin: 5px auto;"></input>
                        </div>
                </form>
                
            </div>
        </div>
        <div class="right-content">
            <!-- Right content goes here -->
        </div>
    </section>

    <section class="scan-container" id="scan-container">
        <div class="left-content">
            <!-- Left content goes here -->
        </div>
        <div class="mid-content">
            <div class="upper-div">
                <img id="qrImage" class="QR" src="https://i.ibb.co/WnnT992/border2.png">
                <input  type="file" id="fileInput" accept="image/*" class="button5" ></input>
                <script>
                   document.getElementById('fileInput').addEventListener('change', function(event) {
                    const file = event.target.files[0];
                    const reader = new FileReader();

                    if (!file) return;

                    // Show the image in the img tag
                    reader.onload = function(e) {
                        document.getElementById('qrImage').src = e.target.result;
                    };
                    reader.readAsDataURL(file); // Read the file to display the image

                    // Initialize Html5QrcodeScanner for decoding
                    const html5QrCode = new Html5Qrcode("qrImage");

                    // Decode the QR code from the file object using scanFileV2
                    html5QrCode.scanFileV2(file, true)
                    .then(decodedResult => {
                        // Display the decoded text
                        document.getElementById('result').innerText = `${decodedResult.decodedText}`;
                    })
                    .catch(err => {
                        console.error("QR code reading failed: ", err);
                        document.getElementById('result').innerText = "No QR code found or invalid QR code!";
                    });
                });
                </script>
                <div id="qr-reader"></div>
                <label class="result" id="result">Scan a QR code to see the result here</label>
                <button class="button" id="Mychart-btn">Scan My Chart</button>
                <button class="button" id="Milan-btn">Match Chart</button>
                
                <script>
                    let html5QrCode;
            
                    function onScanSuccess(qrCodeMessage) {
                        // Handle the result here
                        document.getElementById('result').innerText = `${qrCodeMessage}`;
                        stopScanner()
                        const laxmi_chautisa = [
                            [16, 9, 4, 5],
                            [3, 6, 14, 10],
                            [13, 12, 1, 8],
                            [2, 7, 14, 11]
                        ];

                        // Function to decrypt the text
                        function decrypt(encrypted_text) {
                            let decrypted_text = "";
                            const n = laxmi_chautisa.length;

                            for (let i = 0; i < encrypted_text.length; i++) {
                                // Get the Unicode value of the encrypted character
                                const unicode_val = encrypted_text.charCodeAt(i);

                                // Get the position in the magic square (row and column)
                                const row = i % n;
                                const col = i % n;

                                // Reverse the shift using the magic square value
                                const original_unicode = unicode_val - laxmi_chautisa[row][col];

                                // Convert back to character and add to decrypted text
                                decrypted_text += String.fromCharCode(original_unicode);
                            }

                            return decrypted_text;
                        }

                        // Get the result text from the DOM
                        const encrypted_text = document.getElementById("result").innerText;
                        const dcode = decrypt(encrypted_text);
                        const wcode = dcode;

                        // Split the decoded information
                        const [imp, placements, degrees, id] = wcode.split('#');
                        const [asc, moondeg] = imp.split('/');
                        const [sunpl, moonpl, mercurypl, venuspl, marspl, saturnpl, jupiterpl, rahupl, ketupl] = placements.split('/');
                        const [sundeg, mercurydeg, venusdeg, marsdeg, saturndeg, jupiterdeg, rahudeg, ketudeg] = degrees.split('/');

                        // Assign values to respective elements
                        document.getElementById('Sunnum').innerText = sunpl;
                        document.getElementById('Moonnum').innerText = moonpl;
                        document.getElementById('Mercurynum').innerText = mercurypl;
                        document.getElementById('Venusnum').innerText = venuspl;
                        document.getElementById('Marsnum').innerText = marspl;
                        document.getElementById('Saturnnum').innerText = saturnpl;
                        document.getElementById('Jupiternum').innerText = jupiterpl;
                        document.getElementById('Rahunum').innerText = rahupl;
                        document.getElementById('Ketunum').innerText = ketupl;
                        document.getElementById('asc').innerText = asc;

                        // Assign degree values to respective elements
                        document.getElementById('Sundeg').innerText = sundeg;
                        document.getElementById('Moondeg').innerText = moondeg+".0";
                        document.getElementById('Mercurydeg').innerText = mercurydeg;
                        document.getElementById('Venusdeg').innerText = venusdeg;
                        document.getElementById('Marsdeg').innerText = marsdeg;
                        document.getElementById('Saturndeg').innerText = saturndeg;
                        document.getElementById('Jupiterdeg').innerText = jupiterdeg;
                        document.getElementById('Rahudeg').innerText = rahudeg;
                        document.getElementById('Ketudeg').innerText = ketudeg;
                        document.getElementById('result').innerText = `Your Chart Has been Saved !`;

                    }
                    function onScanSuccess2(qrCodeMessage) {
                        // Handle the result here
                        document.getElementById('result').innerText = `${qrCodeMessage}`;
                        stopScanner()

                    }
            
                    function onScanError(errorMessage) {
                        // Handle scan errors here
                        console.warn(`QR Code scan error: ${errorMessage}`);
                       
                    }
            
                    function startScanner() {
                        if (typeof Html5Qrcode === 'undefined') {
                            console.error('Html5Qrcode is not available');
                            return;
                        }
            
                        html5QrCode = new Html5Qrcode("qr-reader");
            
                        html5QrCode.start(
                            { facingMode: "environment" }, // Use the back camera
                            {
                                fps: 10,    // Optional, frames per second
                                qrbox: 250  // Optional, width and height of the scanning box
                            },
                            onScanSuccess,
                            onScanError
                        ).catch((err) => {
                            console.error(`Failed to start scanning: ${err}`);
                        });
                    }
                    function startScanner2() {
                        if (typeof Html5Qrcode === 'undefined') {
                            console.error('Html5Qrcode is not available');
                            return;
                        }
            
                        html5QrCode = new Html5Qrcode("qr-reader");
            
                        html5QrCode.start(
                            { facingMode: "environment" }, // Use the back camera
                            {
                                fps: 10,    // Optional, frames per second
                                qrbox: 250  // Optional, width and height of the scanning box
                            },
                            onScanSuccess2,
                            onScanError
                        ).catch((err) => {
                            console.error(`Failed to start scanning: ${err}`);
                        });
                    }
                    function stopScanner() {
                        if (html5QrCode) {
                            html5QrCode.stop().then(() => {
                                console.log("QR Code scanning stopped.");
                            }).catch((err) => {
                                console.error(`Failed to stop scanning: ${err}`);
                            });
                        }
                    }
            
                    // Attach event listeners to the buttons
                    document.getElementById('Mychart-btn').addEventListener('click', startScanner);
                    document.getElementById('Milan-btn').addEventListener('click', startScanner2);
                </script>
                
            </div>

            <div class="lower-div">
                <button class="button1" id="Marriage" pys-onClick ="DECODE" >DECODE</button>
                <button class="button1" ID="Predictro" pys-onClick="Compato" onclick="playAudio3()" >MILAN</button> 
                <audio id = "myAudio3" src="Classic dhol.mp3"  ></audio>
                <button class="button1"  id="Switcher" pys-onClick ="Switchchart" onclick="backtochart('#daiva-container2')">MYCHART</button>
                <a href="#daiva-container"><button  class="button1" id="Predictro" onclick ="Predict()">PREDICT</button> </a>
            </div>
        </div>
        <div class="right-content">
            <!-- Right content goes here -->
        </div>
    </section>
  
    
  
    <py-script>
        from js import document
        from js import window
        import pandas as pd
        from pyodide.http import open_url
        
        def Switchchart(*arg,**kwargs):
            asc = Element("asc")
            sunch = Element('Sunnum')
            moonch= Element('Moonnum')
            mercurych = Element('Mercurynum')
            venusch = Element('Venusnum')
            marsch = Element('Marsnum')
            saturnch = Element('Saturnnum')
            Jupiterch = Element('Jupiternum')
            Rahuch = Element('Rahunum')
            Ketuch = Element('Ketunum')
            sunch.write(document.getElementById("Sunnum2").innerText)
            moonch.write(document.getElementById("Moonnum2").innerText)
            mercurych.write(document.getElementById("Mercurynum2").innerText)
            venusch.write(document.getElementById("Venusnum2").innerText)
            marsch.write(document.getElementById("Marsnum2").innerText)
            saturnch.write(document.getElementById("Saturnnum2").innerText)
            Jupiterch.write(document.getElementById("Jupiternum2").innerText)
            Rahuch.write(document.getElementById("Rahunum2").innerText)
            Ketuch.write(document.getElementById("Ketunum2").innerText)
            asc.write(document.getElementById("asc2").innerText)

            sunch = Element('Sundeg')
            moonch= Element('Moondeg')
            mercurych = Element('Mercurydeg')
            venusch = Element('Venusdeg')
            marsch = Element('Marsdeg')
            saturnch = Element('Saturndeg')
            Jupiterch = Element('Jupiterdeg')
            Rahuch = Element('Rahudeg')
            Ketuch = Element('Ketudeg')
            sunch.write(document.getElementById("Sundeg2").innerText)
            moonch.write(document.getElementById("Moondeg2").innerText+".0")
            mercurych.write(document.getElementById("Mercurydeg2").innerText)
            venusch.write(document.getElementById("Venusdeg2").innerText)
            marsch.write(document.getElementById("Marsdeg2").innerText)
            saturnch.write(document.getElementById("Saturndeg2").innerText)
            Jupiterch.write(document.getElementById("Jupiterdeg2").innerText)
            Rahuch.write(document.getElementById("Rahudeg2").innerText)
            Ketuch.write(document.getElementById("Ketudeg2").innerText)

        def QRFetch(*arg,**kwargs):
            window.open("https://jmo1ozciqh2bfonxzrhgzw.on.drv.tw/www.DAIVAQR.com/", "_blank")

            
        def DECODE(*arg,**kwargs):
            laxmi_chautisa = [
            [16, 9, 4, 5],
            [3, 6, 14, 10],
            [13, 12, 1, 8],
            [2, 7, 14, 11]
            ]
            # Function to decrypt the text
            def decrypt(encrypted_text):
                decrypted_text = ""
                n = len(laxmi_chautisa)
                
                for i, char in enumerate(encrypted_text):
                    # Get the Unicode value of the encrypted character
                    unicode_val = ord(char)
                    
                    # Get the position in the magic square (row and column)
                    row = i % n
                    col = i % n
                    
                    # Reverse the shift using the magic square value
                    original_unicode = unicode_val - laxmi_chautisa[row][col]
                    
                    # Convert back to character and add to decrypted text
                    decrypted_text += chr(original_unicode)
                
                return decrypted_text

            dcode = decrypt(document.getElementById("result").innerText)
            wcode = dcode
            imp,placements,degrees,id = wcode.split('#')
            asc,moondeg = imp.split("/")
            sunpl,moonpl,mercurypl,venuspl,marspl,saturnpl,jupiterpl,rahupl,ketupl = placements.split('/')
            sundeg,mercurydeg,venusdeg,marsdeg,saturndeg,jupiterdeg,rahudeg,ketudeg = degrees.split('/')
            sunplin= Element('Sunnum2')
            sunplin.write(sunpl)
            moonplin= Element('Moonnum2')
            moonplin.write(moonpl) 
            mercuryplin = Element('Mercurynum2')
            mercuryplin.write(mercurypl)
            venusplin = Element('Venusnum2')
            venusplin.write(venuspl)
            marsplin = Element('Marsnum2')
            marsplin.write(marspl)
            saturnplin = Element('Saturnnum2')
            saturnplin.write(saturnpl)
            jupiterplin = Element('Jupiternum2')
            jupiterplin.write(jupiterpl)
            rahuplin = Element('Rahunum2')
            rahuplin.write(rahupl)
            ketuplin = Element('Ketunum2')
            ketuplin.write(ketupl)
            asci = Element('asc2')
            asci.write(asc)

            sunde= Element('Sundeg2')  
            sunde.write(sundeg)
            moonde= Element('Moondeg2')
            moonde.write(moondeg)  
            mercuryde = Element('Mercurydeg2')
            mercuryde.write(mercurydeg)
            venusde = Element('Venusdeg2')
            venusde.write(venusdeg)
            marsde = Element('Marsdeg2')
            marsde.write(marsdeg)
            saturnde = Element('Saturndeg2')
            saturnde.write(saturndeg)
            jupiterde = Element('Jupiterdeg2')
            jupiterde.write(jupiterdeg)
            rahude = Element('Rahudeg2')
            rahude.write(rahudeg)
            ketude = Element('Ketudeg2')
            ketude.write(ketudeg)
            Result = document.getElementById("result")
            Result.innerText = "The Chart is Decoded now u can proceed for Milan"
            
    </py-script>
    <!--<py-script src="Milan.py">
          
    </py-script>-->
    <py-script src="Ashtakoot.py">

    </py-script>
    <py-script src="chatbot.py">

    </py-script>
   
</body>
</html>
