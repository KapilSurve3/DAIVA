<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Responsive Layout</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://pyscript.net/releases/2024.1.1/core.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    
    <script defer src="jscript.js" type="text/javascript"></script>
    <script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>
    <script type="module" src="https://pyscript.net/releases/2024.1.1/core.js"></script>
    <script defer src ="https://pyscript.net/alpha/pyscript.js"></script>

    <py-env>
        - matplotlib
        - pandas
        - pyodide.http
    </py-env>
    <style>
        body{
          background-size: cover;
          background-color: rgb(10, 16, 67);
          background-image: url(images/scriptures.png);
          font-family: Arial, sans-serif;
          text-align: center;
          margin: 0;
          padding: 0px;
        }
        
        #qr-reader {
            display: block;
            align-self: left;
            position: relative;
            width: 100%;
            max-width: 400px;
            padding: 10px 20px;
        }
        #result {
            display: block;
            position: relative;
            margin-top: 10px; 
            left: 10%;
            
            font-size: 1.2em;
            color: #ffda83;
            max-width: 80%;
            contain: content;
        }
        .button {
            border-color: rgb(162, 92, 0);
            border-style: dashed;
            background-color: rgb(1, 1, 42);
            border-width: 5px;
            margin: 10px;
            padding: 10px 10px;
            font-size: 1em;
            cursor: pointer;
            max-width: 100px;
            color: rgb(170, 220, 254);
            text-align: left;
        }
        .button1 {
            position: relative;
            border-color: #a1ccff;
            border-style:double;
            border-radius: 100%;
            background-color: rgb(1, 1, 42);
            border-width: 5px;
            margin: 10px;
            padding: 10px 10px;
            font-size: 1em;
            cursor: pointer;
            max-width: 100px;
            color: rgb(170, 220, 254);
            text-align: left;
        }
        .button4{
            border-radius: 20%;
            border-color: #caa851;
            border-style:inset;
            background-color: rgb(1, 1, 42);
            border-width: 5px;
            margin: 5px;
            padding: 10px 10px;
            font-size: 1em;
            cursor: pointer;
            max-width: 100px;
            color: rgb(170, 220, 254);
            text-align: left;
        }
      </style>
       
</head>
<body>
    <img class="left-fixed" style="border: 0" src="https://i.ibb.co/68Znh4c/Kundalibackground1.png">
    <img class="right-fixed" style="border: 0" src="https://i.ibb.co/68Znh4c/Kundalibackground1.png">
    <img id="bottom-fixed" class="bottom-fixed" style="border: 0;"src="https://i.ibb.co/PmkGLCf/bottomline.png">

    <img id ="pbuttonimg" src="https://i.ibb.co/MhrKf60/Uparrow.png" class="imbutton3">
    <button id="pbutton" class="button3" style="border: 0;" onclick="playAudio2()"></button>
    <audio id = "myAudio2" src="Suddenvibration.mp3"  ></audio>
    <div id ="commandpanel" class="Commandpanel">
        <div class="form-container" style="padding-top: 10%;">
            <div class="form-row">
                
                <button id="GetChart" class="button4" pys-onClick="QRFetch" >Get QR</button>
                <button id="updateChart" class="button4">Load|Chart</button>
                <button id="updateChart" class="button4">./Help</button>
            </div>
            <div class="form-row">
                <label for="id2">id: </label> 
                <input type="number" id="id2" name="id2" placeholder="Enter id">
                <label for="Gender">sex: </label>
                <input type="text" id="gender" name="gender" placeholder="Enter Gender">
              
            </div>
            <div class="form-row">
                <label for="dob2">Date of Birth:</label>
                <input type="date" id="dob2" name="dob2">
            </div>
           
            
        </div>
    </div>
    <section class="main-container" id="main-container"> 
      
        <div class="left-content" >
            <label id ="asc2" class="data">1</label>
                <label id = "Sunnum2"class="data">0</label>
                <label id = "Moonnum2"class="data">1</label>
                <label id = "Mercurynum2" class="data">0</label>
                <label id = "Venusnum2"class="data">1</label>
                <label id = "Marsnum2"class="data">0</label>
                <label id = "Saturnnum2"class="data">1</label>
                <label id = "Jupiternum2"class="data">0</label>
                <label id = "Rahunum2" class="data">0</label>
                <label id = "Ketunum2" class="data">1</label>
                <label id = "Sundeg2"class="data">1</label>
                <label id = "Moondeg2"class="data">0</label>
                <label id = "Mercurydeg2" class="data">1</label>
                <label id = "Venusdeg2"class="data">0</label>
                <label id = "Marsdeg2"class="data">1</label>
                <label id = "Saturndeg2"class="data">0</label>
                <label id = "Jupiterdeg2"class="data">1</label>
                <label id = "Rahudeg2" class="data">0</label>
                <label id = "Ketudeg2" class="data">1</label>
            
        </div>
        <div class="mid-content">
            <div class="upper-div">
                <label class="titlemain"> D.A.I.V.A </label>
                <a href="#daiva-container">
                    <img class="chakra" src="https://i.ibb.co/HdxgJzQ/Swastikad.png" onclick="playAudio()" >
                    <audio id = "myAudio" src="fourbars.mp3"  ></audio>
                </a>
            
                
            </div>

            <div class="lower-div">
                <label id ="asc" class="data">1</label>
                <label id = "Sunnum"class="data">0</label>
                <label id = "Moonnum"class="data">1</label>
                <label id = "Mercurynum" class="data">0</label>
                <label id = "Venusnum"class="data">1</label>
                <label id = "Marsnum"class="data">0</label>
                <label id = "Saturnnum"class="data">1</label>
                <label id = "Jupiternum"class="data">0</label>
                <label id = "Rahunum" class="data">0</label>
                <label id = "Ketunum" class="data">1</label>
                <label id = "Sundeg"class="data">1</label>
                <label id = "Moondeg"class="data">0</label>
                <label id = "Mercurydeg" class="data">1</label>
                <label id = "Venusdeg"class="data">0</label>
                <label id = "Marsdeg"class="data">1</label>
                <label id = "Saturndeg"class="data">0</label>
                <label id = "Jupiterdeg"class="data">1</label>
                <label id = "Rahudeg" class="data">0</label>
                <label id = "Ketudeg" class="data">1</label>
            

            </div>
        </div>
        <div class="right-content">
            <!-- Right content goes here -->
        </div>
    </section>
    <section class="daiva-container" id="daiva-container">
        <div class="left-content">
            <!-- Left content goes here -->
        </div>
        <div class="mid-content">
            <div class="upper-div">
                <div style="display: block;max-width: 100%;height: 50px;"></div>
                <label class="mainoutput"> Hello There , Future Instance Generator is under Developement, Stay tuned ! </label>  
                <img class="adhyayan" src="https://i.ibb.co/n7K4wB6/border.png" alt="Adhyayan Image">
                <img class="border1"id="bottom-container" src="https://i.ibb.co/cg4Pwtf/Chart.png" alt="Chart"> 
              
            </div>

            <div class="lower-div">
                <label class="Report" id="Report" ></label>
                
            </div>
        </div>
        <div class="right-content">
            <!-- Right content goes here -->
        </div>
    </section>
    <section class="scan-container" id="scan-container">
        <div class="left-content">
            <!-- Left content goes here -->
        </div>
        <div class="mid-content">
            <div class="upper-div">
                <img class="QR" src="https://i.ibb.co/WnnT992/border2.png">
               
                <div id="qr-reader"></div>
                <label class="result" id="result">Scan a QR code to see the result here</label>
                <button class="button" id="Mychart-btn">Scan My Chart</button>
                <button class="button" id="Milan-btn">Match Chart</button>
                
                <script>
                    let html5QrCode;
            
                    function onScanSuccess(qrCodeMessage) {
                        // Handle the result here
                        document.getElementById('result').innerText = `${qrCodeMessage}`;
                        stopScanner()
                        const laxmi_chautisa = [
                            [16, 9, 4, 5],
                            [3, 6, 14, 10],
                            [13, 12, 1, 8],
                            [2, 7, 14, 11]
                        ];

                        // Function to decrypt the text
                        function decrypt(encrypted_text) {
                            let decrypted_text = "";
                            const n = laxmi_chautisa.length;

                            for (let i = 0; i < encrypted_text.length; i++) {
                                // Get the Unicode value of the encrypted character
                                const unicode_val = encrypted_text.charCodeAt(i);

                                // Get the position in the magic square (row and column)
                                const row = i % n;
                                const col = i % n;

                                // Reverse the shift using the magic square value
                                const original_unicode = unicode_val - laxmi_chautisa[row][col];

                                // Convert back to character and add to decrypted text
                                decrypted_text += String.fromCharCode(original_unicode);
                            }

                            return decrypted_text;
                        }

                        // Get the result text from the DOM
                        const encrypted_text = document.getElementById("result").innerText;
                        const dcode = decrypt(encrypted_text);
                        const wcode = dcode;

                        // Split the decoded information
                        const [imp, placements, degrees, id] = wcode.split('#');
                        const [asc, moondeg] = imp.split('/');
                        const [sunpl, moonpl, mercurypl, venuspl, marspl, saturnpl, jupiterpl, rahupl, ketupl] = placements.split('/');
                        const [sundeg, mercurydeg, venusdeg, marsdeg, saturndeg, jupiterdeg, rahudeg, ketudeg] = degrees.split('/');

                        // Assign values to respective elements
                        document.getElementById('Sunnum').innerText = sunpl;
                        document.getElementById('Moonnum').innerText = moonpl;
                        document.getElementById('Mercurynum').innerText = mercurypl;
                        document.getElementById('Venusnum').innerText = venuspl;
                        document.getElementById('Marsnum').innerText = marspl;
                        document.getElementById('Saturnnum').innerText = saturnpl;
                        document.getElementById('Jupiternum').innerText = jupiterpl;
                        document.getElementById('Rahunum').innerText = rahupl;
                        document.getElementById('Ketunum').innerText = ketupl;
                        document.getElementById('asc').innerText = asc;

                        // Assign degree values to respective elements
                        document.getElementById('Sundeg').innerText = sundeg;
                        document.getElementById('Moondeg').innerText = moondeg+".0";
                        document.getElementById('Mercurydeg').innerText = mercurydeg;
                        document.getElementById('Venusdeg').innerText = venusdeg;
                        document.getElementById('Marsdeg').innerText = marsdeg;
                        document.getElementById('Saturndeg').innerText = saturndeg;
                        document.getElementById('Jupiterdeg').innerText = jupiterdeg;
                        document.getElementById('Rahudeg').innerText = rahudeg;
                        document.getElementById('Ketudeg').innerText = ketudeg;
                        document.getElementById('result').innerText = `Your Chart Has been Saved !`;

                    }
                    function onScanSuccess2(qrCodeMessage) {
                        // Handle the result here
                        document.getElementById('result').innerText = `${qrCodeMessage}`;
                        stopScanner()

                    }
            
                    function onScanError(errorMessage) {
                        // Handle scan errors here
                        console.warn(`QR Code scan error: ${errorMessage}`);
                       
                    }
            
                    function startScanner() {
                        if (typeof Html5Qrcode === 'undefined') {
                            console.error('Html5Qrcode is not available');
                            return;
                        }
            
                        html5QrCode = new Html5Qrcode("qr-reader");
            
                        html5QrCode.start(
                            { facingMode: "environment" }, // Use the back camera
                            {
                                fps: 10,    // Optional, frames per second
                                qrbox: 250  // Optional, width and height of the scanning box
                            },
                            onScanSuccess,
                            onScanError
                        ).catch((err) => {
                            console.error(`Failed to start scanning: ${err}`);
                        });
                    }
                    function startScanner2() {
                        if (typeof Html5Qrcode === 'undefined') {
                            console.error('Html5Qrcode is not available');
                            return;
                        }
            
                        html5QrCode = new Html5Qrcode("qr-reader");
            
                        html5QrCode.start(
                            { facingMode: "environment" }, // Use the back camera
                            {
                                fps: 10,    // Optional, frames per second
                                qrbox: 250  // Optional, width and height of the scanning box
                            },
                            onScanSuccess2,
                            onScanError
                        ).catch((err) => {
                            console.error(`Failed to start scanning: ${err}`);
                        });
                    }
                    function stopScanner() {
                        if (html5QrCode) {
                            html5QrCode.stop().then(() => {
                                console.log("QR Code scanning stopped.");
                            }).catch((err) => {
                                console.error(`Failed to stop scanning: ${err}`);
                            });
                        }
                    }
            
                    // Attach event listeners to the buttons
                    document.getElementById('Mychart-btn').addEventListener('click', startScanner);
                    document.getElementById('Milan-btn').addEventListener('click', startScanner2);
                </script>
                
            </div>

            <div class="lower-div">
                <button class="button1" id="Marriage" pys-onClick ="DECODE" >DECODE</button>
                <button class="button1" ID="Predictro" pys-onClick="Compato" onclick="playAudio3()" >MILAN</button> 
                <audio id = "myAudio3" src="Classic dhol.mp3"  ></audio>
                <button class="button1" id="Switcher" pys-onClick ="Switchchart">SWITCH</button>
                <button class="button1" ID="Predictro" onclick ="Predict()">PREDICT</button> 
            </div>
        </div>
        <div class="right-content">
            <!-- Right content goes here -->
        </div>
    </section>
  
    
  
    <py-script>
        from js import document
        from js import window
        import pandas as pd
        from pyodide.http import open_url
        
        def Switchchart(*arg,**kwargs):
            asc = Element("asc")
            sunch = Element('Sunnum')
            moonch= Element('Moonnum')
            mercurych = Element('Mercurynum')
            venusch = Element('Venusnum')
            marsch = Element('Marsnum')
            saturnch = Element('Saturnnum')
            Jupiterch = Element('Jupiternum')
            Rahuch = Element('Rahunum')
            Ketuch = Element('Ketunum')
            sunch.write(document.getElementById("Sunnum2").innerText)
            moonch.write(document.getElementById("Moonnum2").innerText)
            mercurych.write(document.getElementById("Mercurynum2").innerText)
            venusch.write(document.getElementById("Venusnum2").innerText)
            marsch.write(document.getElementById("Marsnum2").innerText)
            saturnch.write(document.getElementById("Saturnnum2").innerText)
            Jupiterch.write(document.getElementById("Jupiternum2").innerText)
            Rahuch.write(document.getElementById("Rahunum2").innerText)
            Ketuch.write(document.getElementById("Ketunum2").innerText)
            asc.write(document.getElementById("asc2").innerText)

            sunch = Element('Sundeg')
            moonch= Element('Moondeg')
            mercurych = Element('Mercurydeg')
            venusch = Element('Venusdeg')
            marsch = Element('Marsdeg')
            saturnch = Element('Saturndeg')
            Jupiterch = Element('Jupiterdeg')
            Rahuch = Element('Rahudeg')
            Ketuch = Element('Ketudeg')
            sunch.write(document.getElementById("Sundeg2").innerText)
            moonch.write(document.getElementById("Moondeg2").innerText+".0")
            mercurych.write(document.getElementById("Mercurydeg2").innerText)
            venusch.write(document.getElementById("Venusdeg2").innerText)
            marsch.write(document.getElementById("Marsdeg2").innerText)
            saturnch.write(document.getElementById("Saturndeg2").innerText)
            Jupiterch.write(document.getElementById("Jupiterdeg2").innerText)
            Rahuch.write(document.getElementById("Rahudeg2").innerText)
            Ketuch.write(document.getElementById("Ketudeg2").innerText)

        def QRFetch(*arg,**kwargs):
            window.open("https://jmo1ozciqh2bfonxzrhgzw.on.drv.tw/www.DAIVAQR.com/", "_blank")

            
        def DECODE(*arg,**kwargs):
            laxmi_chautisa = [
            [16, 9, 4, 5],
            [3, 6, 14, 10],
            [13, 12, 1, 8],
            [2, 7, 14, 11]
            ]
            # Function to decrypt the text
            def decrypt(encrypted_text):
                decrypted_text = ""
                n = len(laxmi_chautisa)
                
                for i, char in enumerate(encrypted_text):
                    # Get the Unicode value of the encrypted character
                    unicode_val = ord(char)
                    
                    # Get the position in the magic square (row and column)
                    row = i % n
                    col = i % n
                    
                    # Reverse the shift using the magic square value
                    original_unicode = unicode_val - laxmi_chautisa[row][col]
                    
                    # Convert back to character and add to decrypted text
                    decrypted_text += chr(original_unicode)
                
                return decrypted_text

            dcode = decrypt(document.getElementById("result").innerText)
            wcode = dcode
            imp,placements,degrees,id = wcode.split('#')
            asc,moondeg = imp.split("/")
            sunpl,moonpl,mercurypl,venuspl,marspl,saturnpl,jupiterpl,rahupl,ketupl = placements.split('/')
            sundeg,mercurydeg,venusdeg,marsdeg,saturndeg,jupiterdeg,rahudeg,ketudeg = degrees.split('/')
            sunplin= Element('Sunnum2')
            sunplin.write(sunpl)
            moonplin= Element('Moonnum2')
            moonplin.write(moonpl) 
            mercuryplin = Element('Mercurynum2')
            mercuryplin.write(mercurypl)
            venusplin = Element('Venusnum2')
            venusplin.write(venuspl)
            marsplin = Element('Marsnum2')
            marsplin.write(marspl)
            saturnplin = Element('Saturnnum2')
            saturnplin.write(saturnpl)
            jupiterplin = Element('Jupiternum2')
            jupiterplin.write(jupiterpl)
            rahuplin = Element('Rahunum2')
            rahuplin.write(rahupl)
            ketuplin = Element('Ketunum2')
            ketuplin.write(ketupl)
            asci = Element('asc2')
            asci.write(asc)

            sunde= Element('Sundeg2')  
            sunde.write(sundeg)
            moonde= Element('Moondeg2')
            moonde.write(moondeg)  
            mercuryde = Element('Mercurydeg2')
            mercuryde.write(mercurydeg)
            venusde = Element('Venusdeg2')
            venusde.write(venusdeg)
            marsde = Element('Marsdeg2')
            marsde.write(marsdeg)
            saturnde = Element('Saturndeg2')
            saturnde.write(saturndeg)
            jupiterde = Element('Jupiterdeg2')
            jupiterde.write(jupiterdeg)
            rahude = Element('Rahudeg2')
            rahude.write(rahudeg)
            ketude = Element('Ketudeg2')
            ketude.write(ketudeg)
            Result = document.getElementById("result")
            Result.innerText = "The Chart is Decoded now u can proceed for Milan"
            
    </py-script>
    <py-script src="Milan.py">
          
    </py-script>
    <py-script src="Ashtakoot.py">

    </py-script>
   
</body>
</html>
