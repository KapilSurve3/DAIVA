<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Code Scanner</title>
    <!-- Load the UMD version of qr-scanner from CDN -->
    <script src="https://cdn.jsdelivr.net/npm/qr-scanner/qr-scanner.umd.min.js"></script>
</head>
<body>
    <h1>QR Code Scanner</h1>
    <video id="scanner" style="width: 100%; max-width: 500px;"></video>
    <p>Scanned Data: <span id="qr-result">No result</span></p>
    <p id="error-message" style="color:red;"></p> <!-- Error message -->

    <script>
        const video = document.getElementById('scanner');
        const qrResult = document.getElementById('qr-result');
        const errorMessage = document.getElementById('error-message');

        async function startScanner() {
            try {
                // Request user camera access
                const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } });
                video.srcObject = stream;  // Set video source
                video.play();

                // Create a QR scanner instance
                const qrScanner = new QrScanner(video, result => {
                    console.log('Decoded QR Code:', result);
                    
                    // Display result
                    qrResult.textContent = result.data || 'No QR code detected';
                }, {
                    // Optional configurations
                    returnDetailedScanResult: true
                });

                // Start QR code scanner
                qrScanner.start().catch(error => {
                    errorMessage.textContent = `Error starting QR scanner: ${error.message}`;
                    console.error("Error starting QR scanner: ", error);
                });
            } catch (error) {
                errorMessage.textContent = `Error accessing camera: ${error.message}`;
                console.error("Error accessing camera: ", error);
            }
        }

        // Start the scanner on page load
        startScanner();
    </script>
</body>
</html>
